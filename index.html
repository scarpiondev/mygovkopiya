<!doctype html>
<html lang="uz">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Hujjat - Kirish</title>
<style>
  :root{
    --bg:#f5f7f8;
    --card:#ffffff;
    --muted:#6b7280;
    --green:#2ea44f;
    --maxw:920px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, Arial, Helvetica, sans-serif;background:var(--bg);color:#222;padding-top:env(safe-area-inset-top)}

  .container{max-width:var(--maxw);margin:0 auto;padding:18px}

  /* header wrapper so burger can be absolute */
  .header{
    position:relative;
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:14px;
    padding-right:72px; /* reserve space for burger */
  }

  .brand{display:flex;align-items:center;gap:12px}
  .brand img.logo{
    width:46px;height:46px;border-radius:8px;object-fit:cover;background:#fff;border:1px solid rgba(0,0,0,0.04);
    box-shadow:0 6px 18px rgba(11,22,37,0.06);min-width:46px;min-height:46px;display:block;
  }

  .brand .title{font-weight:700;font-size:15px}
  .brand .subtitle{font-size:12px;color:var(--muted)}

  /* BURGER - absolute, ALWAYS shows 3 distinct bars */
  .burger{
    position:absolute;
    right:8px;
    top:50%;
    transform:translateY(-50%);
    width:48px;
    height:48px;
    border-radius:10px;
    background:#fff;
    border:1px solid rgba(0,0,0,0.06);
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 6px 18px rgba(11,22,37,0.06);
    z-index:50;
    cursor:pointer;
  }

  /* container for the 3 bars */
  .burger .lines{
    width:22px;
    height:16px; /* enough vertical space for three bars */
    position:relative;
    display:block;
  }

  /* Each bar is a block, positioned by top to ensure separation */
  .burger .lines span{
    display:block;
    position:absolute;
    left:0;
    width:100%;
    height:2px;
    background:#111; /* dark bar color */
    border-radius:2px;
    transition: transform .15s ease;
  }
  .burger .lines span.bar-1{ top:0; }
  .burger .lines span.bar-2{ top:7px; } /* spaced 7px apart for clarity */
  .burger .lines span.bar-3{ top:14px; }

  /* optional hover effect */
  .burger:hover .lines span{ background:#000; transform: translateX(0); }
  .burger:active{ transform: translateY(-50%) scale(0.98); }

  /* rest of page */
  .card{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 10px 40px rgba(11,22,37,0.06);border:1px solid rgba(0,0,0,0.03)}
  .alert{background:#fff7e6;border:1px solid #ffe8b5;padding:12px;border-radius:8px;color:#6b4b00;margin-bottom:12px;font-size:13px}
  .pin-row{display:flex;gap:10px;align-items:center}
  .pin-input{flex:1;background:#fff;border:1px solid #e6e6e6;padding:12px 14px;border-radius:8px;font-size:15px}
  .open-btn{display:block;width:100%;margin-top:10px;background:var(--green);color:#fff;border:0;padding:12px;border-radius:8px;font-weight:700;font-size:15px;cursor:pointer;box-shadow:0 8px 20px rgba(46,164,79,0.16)}
  .hint{font-size:13px;color:var(--muted);margin-top:10px}
  #error{color:#c92a2a;margin-top:8px;font-size:13px}
  .preview-wrap{margin-top:20px;display:flex;justify-content:center}
  .preview-card{width:100%;max-width:980px;background:#fff;border-radius:10px;padding:16px;box-shadow:0 18px 40px rgba(11,22,37,0.08);border:1px solid rgba(0,0,0,0.04)}
  .paper{background:linear-gradient(180deg,#ffffff 0,#f8fafc 100%);padding:12px;border-radius:6px;border:1px solid rgba(0,0,0,0.03)}
  .doc-placeholder img{display:block;width:100%;height:auto;border-radius:6px;max-width:420px;margin:0 auto;object-fit:cover}
  @media (max-width:720px){ .paper{padding:10px} .header{padding-right:58px} }
</style>
</head>
<body>
  <div class="container">
    <header class="header" role="banner">
      <div class="brand">
        <!-- ensure this path exists or placeholder will display -->
        <img id="siteLogo" class="logo" src="assets/logo.png" alt="logo">
      </div>

      <!-- burger with 3 bars -->
      <button class="burger" id="burgerBtn" aria-label="menu">
        <span class="lines" aria-hidden="true">
          <span class="bar-1"></span>
          <span class="bar-2"></span>
          <span class="bar-3"></span>
        </span>
      </button>
    </header>

    <main class="card" role="main">
      <div class="alert">Пожалуйста пройдите авторизацию чтобы система определила вас. Если документ принадлежит вам, введения ПИН кода не требуется.</div>

      <div>
        <div class="pin-row">
          <input id="pin" class="pin-input" type="text" inputmode="numeric">
        </div>
        <button id="openBtn" class="open-btn">Открыть</button>
        <div class="hint">PIN-kod размещается рядом с QR-кодом документа</div>
        <div id="error" role="alert"></div>
      </div>

      <div class="preview-wrap">
        <div class="preview-card">
          <div class="paper" id="previewPane">
            <div class="doc-placeholder" id="docPlaceholder">
              <img src="assets/hujjat.jpg" alt="Document preview">
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

<script>
(function(){
  const PDF_URL = "/assets/document.pdf";
  const STORED_PIN = "9876";

  const pinInput = document.getElementById('pin');
  const openBtn = document.getElementById('openBtn');
  const errorEl = document.getElementById('error');
  const burgerBtn = document.getElementById('burgerBtn');

  // demo: burger toggles a console message (replace with real menu)
  burgerBtn.addEventListener('click', function(){
    // visual micro-interaction
    burgerBtn.animate([{ transform: 'translateY(-50%) scale(1)' }, { transform: 'translateY(-50%) scale(0.96)' }, { transform: 'translateY(-50%) scale(1)' }], { duration: 160 });
    console.log('Burger clicked — implement your menu here');
  });

  function reverseString(s){ return s.split('').reverse().join(''); }

  openBtn.addEventListener('click', function(){
    errorEl.textContent = '';
    const v = (pinInput.value || '').trim();
    if (!v) { errorEl.textContent = 'Iltimos PDFdagi PINni kiriting.'; return; }
    if (v === STORED_PIN || reverseString(v) === STORED_PIN) {
      try {
        const newWin = window.open(PDF_URL, '_blank', 'noopener,noreferrer');
        if (!newWin) window.location.href = PDF_URL;
      } catch(e) { window.location.href = PDF_URL; }
    } else {
      errorEl.textContent = "PIN noto‘g‘ri. Iltimos PDFdagi PINni tersa kiriting.";
    }
  });

  pinInput.addEventListener('keydown', function(e){ if (e.key === 'Enter') openBtn.click(); });

  // fallback placeholder if logo fails
  const logo = document.getElementById('siteLogo');
  logo.addEventListener('error', function(){
    logo.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(
      '<svg xmlns="http://www.w3.org/2000/svg" width="46" height="46"><rect width="46" height="46" rx="8" fill="%23f0f0f0"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="%23999">LOGO</text></svg>'
    );
  });
})();
</script>
</body>
</html>
